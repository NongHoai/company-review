<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <title><%= company %> - ฤรกnh giรก</title>
    <link rel="stylesheet" href="/style.css" />
  </head>
  <body>
    <h1>๐ข <%= company %></h1>

    <% let averageRating = 0; if (reviews && reviews.length > 0) { const
    totalRating = reviews.reduce((sum, review) => sum + review.rating, 0);
    averageRating = (totalRating / reviews.length).toFixed(1); } %>

    <p>โญ ฤiแปm trung bรฌnh: <strong><%= averageRating %>/5</strong></p>
    <a href="/">โฌ Trแป lแบกi</a>

    <h2>Thรชm ฤรกnh giรก mแปi:</h2>
    <form action="/add-review" method="POST">
      <input type="hidden" name="company" value="<%= company %>" />
      <input name="reviewer" placeholder="Tรชn bแบกn (hoแบทc ฤแป trแปng)" />
      <input
        type="number"
        name="rating"
        min="1"
        max="5"
        placeholder="ฤiแปm (1-5)"
        required
      />
      <textarea name="comment" placeholder="Nhแบญn xรฉt"></textarea>
      <button type="submit">Gแปญi</button>
    </form>

    <h2>๐ฌ Cรกc ฤรกnh giรก:</h2>

    <% if (reviews && reviews.length > 0) { %> <%
    reviews.forEach(function(review) { %>
    <div class="review">
      <p>
        <strong><%= review.reviewer || "แบจn danh" %></strong> - โญ <%=
        review.rating %>
      </p>
      <p><%= review.comment %></p>
      <hr />
    </div>
    <% }); %> <% } else { %>
    <p>Chฦฐa cรณ ฤรกnh giรก nรo cho cรดng ty nรy.</p>
    <% } %>
  </body>
</html>
